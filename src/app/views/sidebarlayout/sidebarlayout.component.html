<nz-layout class="app-layout">
  <nz-sider nzCollapsible [(nzCollapsed)]="isCollapsed" nzBreakpoint="md" [nzCollapsedWidth]="0" nzTheme="light"
    nzWidth="260px">
    <div class="sidebar-logo">
      <img src="assets/logos/ShreeIcon.png" [alt]="companyName" />
      <span class="logo-text">{{companyName}}</span>
    </div>

    <div class="sidebar-menu-wrapper">
      <ul nz-menu nzTheme="light" nzMode="inline">
        <ng-container *ngFor="let module of ModuleList">

          <li *ngIf="module.SubModuleList && module.SubModuleList.length > 0" nz-submenu
            [nzOpen]="isSubmenuOpen(module)" [nzTitle]="submenuTitle">
  
            <ng-template #submenuTitle>
              <div class="submenu-title">
                <img [src]="module.WhiteLogo" [alt]="module.Name" class="menu-icon" />
                <span class="menu-text">{{ module.Name }}</span>
              </div>
            </ng-template>

            <ul>
              <li nz-menu-item *ngFor="let submodule of module.SubModuleList"
                [nzSelected]="isRouteActive(submodule.RouterLink)" (click)="NavigationFromLogo(submodule.RouterLink)">
                <img [src]="submodule.LogoPath" [alt]="submodule.Name" class="submenu-icon" />
                <span class="submenu-text">{{ submodule.Name }}</span>
              </li>
            </ul>
          </li>

          <li *ngIf="!module.SubModuleList || module.SubModuleList.length === 0" nz-menu-item
            [nzSelected]="isRouteActive(module.RouterLink)" (click)="NavigationFromLogo(module.RouterLink)">
            <img [src]="module.WhiteLogo" [alt]="module.Name" class="menu-icon" />
            <span class="menu-text">{{ module.Name }}</span>
          </li>
        </ng-container>
      </ul>
    </div>
  </nz-sider>



  <nz-layout>
    <nz-header class="header">
      <!-- <span class="trigger">
        <i nz-icon [nzType]="isCollapsed ? 'menu-unfold' : 'menu-fold'"></i>
      </span> -->

      <div class="header-mobile-logo" *ngIf="isCollapsed">
          <img src="assets/logos/ShreeIcon.png" alt="Shree Developers" />
      </div>

      <div class="header-date-wrapper">
        <span style="font-size: 90%"><b>{{ myDay }}</b></span>
        <span style="margin-left: 5px; font-size: 90%"><b>{{ myDate }}</b></span>
      </div>

      <div class="header-right-group">
        <div class="company-select-wrapper">
          <nz-select nzShowSearch [nzNotFoundContent]="noDataTpl" nzPlaceHolder="Shree Developers" [nzSize]="'large'"
            [(ngModel)]="CompanyRef" name="CompanyRef" id="CompanyRef" (ngModelChange)="changecompany(CompanyRef)"
            [nzDropdownMatchSelectWidth]="true" [disabled]="appStateManagement.isDropdownDisabled()">
            <nz-option *ngFor="let company of CompanyList" [nzLabel]="company.p.Name"
              [nzValue]="company.p.Ref"></nz-option>
          </nz-select>
        </div>
        <!-- Notifications -->
        <div class="header-actions">

          <!-- Notifications -->
          <div class="notification-wrapper" (click)="toggleNotification()" tabindex="0">
            <nz-badge [nzCount]="notifications.length" class="notification-badge">
              <img src="assets/icons/notification.png" alt="notification-icon" />
            </nz-badge>

            <div class="custom-notification-menu" *ngIf="showNotifications">
              <div class="notification-header">
                <span>Notifications</span>
                <button class="clear-btn" (click)="clearNotifications($event)">Clear</button>
              </div>
              <ul>
                <li *ngFor="let item of notifications" class="notification-item" (click)="notificationItemClick()">
                  <div class="notification-info">
                    <span class="notification-title">{{ item.title }}</span>
                    <span class="notification-time">{{ item.time }}</span>
                  </div>
                </li>
                <li *ngIf="notifications.length === 0" class="notification-item empty">
                  No notifications
                </li>
              </ul>
            </div>
          </div>


          <!-- Avatar -->
          <div class="avatar-dropdown-wrapper" nz-dropdown [nzDropdownMenu]="menu">
            <nz-avatar [nzSrc]="imagePreviewUrl || ''" nzShape="circle" nzSize="large"></nz-avatar>
          </div>

        </div>
      </div>
    </nz-header>

    <nz-content>
      <div class="inner-content">
        <router-outlet></router-outlet>
      </div>
    </nz-content>
  </nz-layout>

   
  <nz-dropdown-menu #menu="nzDropdownMenu">
       
    <ul nz-menu>
      <li nz-menu-item routerLinkActive="active" routerLink="/homepage/Website/Your_Profile">
        <!-- <nz-icon nzType="file"></nz-icon>         -->
        Your Profile      
      </li>
           
      <li nz-menu-item routerLinkActive="active" routerLink="/homepage/Website/Change_Password/">
        <!-- <nz-icon nzType="file"></nz-icon>         -->
        Change Password      
      </li>
      <li nz-menu-divider></li>
      <li nz-menu-item routerLinkActive="active" (click)="logout()">
        <!--   <nz-icon nzType="file"></nz-icon>         -->
        Log Out      
      </li>
    </ul>
  </nz-dropdown-menu>
  <ng-template #noDataTpl>
    <div style="text-align: center; color: rgba(0, 0, 0, 0.25)">No Data</div>
  </ng-template>
</nz-layout>