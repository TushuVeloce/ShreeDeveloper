<app-header-with-back-handler title="Site Details" backRoute="mobile-app/tabs/dashboard/site-management">
</app-header-with-back-handler>

<ion-content [fullscreen]="true" class="dashboard-bg">
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-card class="main-site-summary" *ngIf="singleSite">
    <ion-card-header class="site-header">
      <ion-card-title>{{ singleSite.p.Name }}</ion-card-title>
      <ion-card-subtitle>{{ singleSite.p.AddressLine1 }}</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <div class="summary-details-grid">
        <div class="summary-item">
          <ion-icon name="layers-outline"></ion-icon>
          <div class="summary-text">
            <span class="label">Total Land Area</span>
            <span class="value">{{ singleSite.p.TotalLandAreaInSqm }} Sqm</span>
          </div>
        </div>
        <div class="summary-item">
          <ion-icon name="grid-outline"></ion-icon>
          <div class="summary-text">
            <span class="label">Total Plots</span>
            <span class="value">{{ DisplayMasterList.length || 0 }}</span>
          </div>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <ion-list *ngIf="DisplayMasterList.length > 0; else noData" class="plot-list ion-padding">
    <ion-list-header class="plot-list-header">
      <ion-label>Plots List</ion-label>
    </ion-list-header>
    <ion-item *ngFor="let plot of DisplayMasterList" class="plot-item" lines="none">
      <ion-label>
        <h3 class="plot-no">Plot No: {{ plot.p.PlotNo }}</h3>
        <p class="plot-area">{{ plot.p.AreaInSqft }} sq.ft | {{ plot.p.AreaInSqm }} sq.m</p>
      </ion-label>
      <ion-badge slot="end"
        [color]="plot.p.CurrentBookingRemark ==BookingRemark.Shree_Booked || plot.p.CurrentBookingRemark ==BookingRemark.Owner_Booked ? 'primary':plot.p.CurrentBookingRemark ==BookingRemark.Owner_Saledeed || plot.p.CurrentBookingRemark ==BookingRemark.Shree_Saledeed?'warning':'success'">
        {{ plot.p.BookingRemarkName }}
      </ion-badge>
    </ion-item>
  </ion-list>

  <ng-template #noData>
    <div class="empty-state">
      <ion-icon name="alert-circle-outline"></ion-icon>
      <p>No site records or plots found.</p>
    </div>
  </ng-template>

</ion-content>