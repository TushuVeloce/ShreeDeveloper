<app-loader *ngIf="isLoading"></app-loader>

<app-header-with-back-handler title="CRM" backRoute="app_homepage/tabs/home"></app-header-with-back-handler>

<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <!-- Stats -->
  <div class="crm-container">
    <!-- CRM Stats Overview -->
    <div class="crm-stats">
      <div class="stat-card" *ngFor="let stat of crmStats">
        <div class="stat-icon">
          <ion-icon [name]="stat.icon"></ion-icon>
        </div>
        <h3 class="stat-value">{{ stat.value }}</h3>
        <p class="stat-title">{{ stat.title }}</p>
      </div>
    </div>
  </div>
  <ion-grid class="ion-padding">

    <!-- Action Buttons -->
    <ion-row>
      <ion-col size="6">
        <ion-button expand="block" (click)="goToVisitedCustomer()" class="submit-button primary-button">Customer
          Enquiry</ion-button>
      </ion-col>
      <ion-col size="6">
        <ion-button expand="block" color="secondary" (click)="goToCustomerFollowUp()"
          class="submit-button cancel-button">Customer Follow-Up</ion-button>
      </ion-col>
    </ion-row>

    <!-- Follow-Up Reminders -->
    <ion-row *ngIf="FilterFollowupList.length > 0">
      <ion-col size="12">
        <h2 class="section-title">Reminder for Follow-Up</h2>
      </ion-col>
      <ion-col size="12" size-md="6" *ngFor="let reminder of FilterFollowupList">
        <ion-card (click)="onFollowUpClick(reminder)" class="reminder-card">
          <ion-card-content>
            <ion-icon name="people-outline"></ion-icon>
            <div class="reminder-details">
              <p class="reminder-title">{{ reminder.p.CustomerName }}</p>
              <p class="reminder-title">{{ reminder.p.ContactNos }}</p>
            </div>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    <ion-row *ngIf="!FilterFollowupList.length && !isLoading">
      <ion-col size="12" class="ion-text-center">
        <p>No follow-up reminders found for the Todays date.</p>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>